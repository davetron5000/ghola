(()=>{var He=Object.create;var Ce=Object.defineProperty;var je=Object.getOwnPropertyDescriptor;var Ye=Object.getOwnPropertyNames;var ze=Object.getPrototypeOf,Ve=Object.prototype.hasOwnProperty;var a=(s,e)=>Ce(s,"name",{value:e,configurable:!0});var ue=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Xe=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Ye(e))!Ve.call(s,o)&&o!==t&&Ce(s,o,{get:()=>e[o],enumerable:!(r=je(e,o))||r.enumerable});return s};var Te=(s,e,t)=>(t=s!=null?He(ze(s)):{},Xe(e||!s||!s.__esModule?Ce(t,"default",{value:s,enumerable:!0}):t,s));var Be=ue((mt,Me)=>{"use strict";Me.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ve=ue((ft,Pe)=>{var U=Be(),$e={};for(let s of Object.keys(U))$e[U[s]]=s;var h={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Pe.exports=h;for(let s of Object.keys(h)){if(!("channels"in h[s]))throw new Error("missing channels property: "+s);if(!("labels"in h[s]))throw new Error("missing channel labels property: "+s);if(h[s].labels.length!==h[s].channels)throw new Error("channel and label counts mismatch: "+s);let{channels:e,labels:t}=h[s];delete h[s].channels,delete h[s].labels,Object.defineProperty(h[s],"channels",{value:e}),Object.defineProperty(h[s],"labels",{value:t})}h.rgb.hsl=function(s){let e=s[0]/255,t=s[1]/255,r=s[2]/255,o=Math.min(e,t,r),i=Math.max(e,t,r),n=i-o,l,c;i===o?l=0:e===i?l=(t-r)/n:t===i?l=2+(r-e)/n:r===i&&(l=4+(e-t)/n),l=Math.min(l*60,360),l<0&&(l+=360);let u=(o+i)/2;return i===o?c=0:u<=.5?c=n/(i+o):c=n/(2-i-o),[l,c*100,u*100]};h.rgb.hsv=function(s){let e,t,r,o,i,n=s[0]/255,l=s[1]/255,c=s[2]/255,u=Math.max(n,l,c),g=u-Math.min(n,l,c),m=a(function(he){return(u-he)/6/g+1/2},"diffc");return g===0?(o=0,i=0):(i=g/u,e=m(n),t=m(l),r=m(c),n===u?o=r-t:l===u?o=1/3+e-r:c===u&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)),[o*360,i*100,u*100]};h.rgb.hwb=function(s){let e=s[0],t=s[1],r=s[2],o=h.rgb.hsl(s)[0],i=1/255*Math.min(e,Math.min(t,r));return r=1-1/255*Math.max(e,Math.max(t,r)),[o,i*100,r*100]};h.rgb.cmyk=function(s){let e=s[0]/255,t=s[1]/255,r=s[2]/255,o=Math.min(1-e,1-t,1-r),i=(1-e-o)/(1-o)||0,n=(1-t-o)/(1-o)||0,l=(1-r-o)/(1-o)||0;return[i*100,n*100,l*100,o*100]};function Ge(s,e){return(s[0]-e[0])**2+(s[1]-e[1])**2+(s[2]-e[2])**2}a(Ge,"comparativeDistance");h.rgb.keyword=function(s){let e=$e[s];if(e)return e;let t=1/0,r;for(let o of Object.keys(U)){let i=U[o],n=Ge(s,i);n<t&&(t=n,r=o)}return r};h.keyword.rgb=function(s){return U[s]};h.rgb.xyz=function(s){let e=s[0]/255,t=s[1]/255,r=s[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;let o=e*.4124+t*.3576+r*.1805,i=e*.2126+t*.7152+r*.0722,n=e*.0193+t*.1192+r*.9505;return[o*100,i*100,n*100]};h.rgb.lab=function(s){let e=h.rgb.xyz(s),t=e[0],r=e[1],o=e[2];t/=95.047,r/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let i=116*r-16,n=500*(t-r),l=200*(r-o);return[i,n,l]};h.hsl.rgb=function(s){let e=s[0]/360,t=s[1]/100,r=s[2]/100,o,i,n;if(t===0)return n=r*255,[n,n,n];r<.5?o=r*(1+t):o=r+t-r*t;let l=2*r-o,c=[0,0,0];for(let u=0;u<3;u++)i=e+1/3*-(u-1),i<0&&i++,i>1&&i--,6*i<1?n=l+(o-l)*6*i:2*i<1?n=o:3*i<2?n=l+(o-l)*(2/3-i)*6:n=l,c[u]=n*255;return c};h.hsl.hsv=function(s){let e=s[0],t=s[1]/100,r=s[2]/100,o=t,i=Math.max(r,.01);r*=2,t*=r<=1?r:2-r,o*=i<=1?i:2-i;let n=(r+t)/2,l=r===0?2*o/(i+o):2*t/(r+t);return[e,l*100,n*100]};h.hsv.rgb=function(s){let e=s[0]/60,t=s[1]/100,r=s[2]/100,o=Math.floor(e)%6,i=e-Math.floor(e),n=255*r*(1-t),l=255*r*(1-t*i),c=255*r*(1-t*(1-i));switch(r*=255,o){case 0:return[r,c,n];case 1:return[l,r,n];case 2:return[n,r,c];case 3:return[n,l,r];case 4:return[c,n,r];case 5:return[r,n,l]}};h.hsv.hsl=function(s){let e=s[0],t=s[1]/100,r=s[2]/100,o=Math.max(r,.01),i,n;n=(2-t)*r;let l=(2-t)*o;return i=t*o,i/=l<=1?l:2-l,i=i||0,n/=2,[e,i*100,n*100]};h.hwb.rgb=function(s){let e=s[0]/360,t=s[1]/100,r=s[2]/100,o=t+r,i;o>1&&(t/=o,r/=o);let n=Math.floor(6*e),l=1-r;i=6*e-n,n&1&&(i=1-i);let c=t+i*(l-t),u,g,m;switch(n){default:case 6:case 0:u=l,g=c,m=t;break;case 1:u=c,g=l,m=t;break;case 2:u=t,g=l,m=c;break;case 3:u=t,g=c,m=l;break;case 4:u=c,g=t,m=l;break;case 5:u=l,g=t,m=c;break}return[u*255,g*255,m*255]};h.cmyk.rgb=function(s){let e=s[0]/100,t=s[1]/100,r=s[2]/100,o=s[3]/100,i=1-Math.min(1,e*(1-o)+o),n=1-Math.min(1,t*(1-o)+o),l=1-Math.min(1,r*(1-o)+o);return[i*255,n*255,l*255]};h.xyz.rgb=function(s){let e=s[0]/100,t=s[1]/100,r=s[2]/100,o,i,n;return o=e*3.2406+t*-1.5372+r*-.4986,i=e*-.9689+t*1.8758+r*.0415,n=e*.0557+t*-.204+r*1.057,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),n=Math.min(Math.max(0,n),1),[o*255,i*255,n*255]};h.xyz.lab=function(s){let e=s[0],t=s[1],r=s[2];e/=95.047,t/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;let o=116*t-16,i=500*(e-t),n=200*(t-r);return[o,i,n]};h.lab.xyz=function(s){let e=s[0],t=s[1],r=s[2],o,i,n;i=(e+16)/116,o=t/500+i,n=i-r/200;let l=i**3,c=o**3,u=n**3;return i=l>.008856?l:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,n=u>.008856?u:(n-16/116)/7.787,o*=95.047,i*=100,n*=108.883,[o,i,n]};h.lab.lch=function(s){let e=s[0],t=s[1],r=s[2],o;o=Math.atan2(r,t)*360/2/Math.PI,o<0&&(o+=360);let n=Math.sqrt(t*t+r*r);return[e,n,o]};h.lch.lab=function(s){let e=s[0],t=s[1],o=s[2]/360*2*Math.PI,i=t*Math.cos(o),n=t*Math.sin(o);return[e,i,n]};h.rgb.ansi16=function(s,e=null){let[t,r,o]=s,i=e===null?h.rgb.hsv(s)[2]:e;if(i=Math.round(i/50),i===0)return 30;let n=30+(Math.round(o/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return i===2&&(n+=60),n};h.hsv.ansi16=function(s){return h.rgb.ansi16(h.hsv.rgb(s),s[2])};h.rgb.ansi256=function(s){let e=s[0],t=s[1],r=s[2];return e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5)};h.ansi16.rgb=function(s){let e=s%10;if(e===0||e===7)return s>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(s>50)+1)*.5,r=(e&1)*t*255,o=(e>>1&1)*t*255,i=(e>>2&1)*t*255;return[r,o,i]};h.ansi256.rgb=function(s){if(s>=232){let i=(s-232)*10+8;return[i,i,i]}s-=16;let e,t=Math.floor(s/36)/5*255,r=Math.floor((e=s%36)/6)/5*255,o=e%6/5*255;return[t,r,o]};h.rgb.hex=function(s){let t=(((Math.round(s[0])&255)<<16)+((Math.round(s[1])&255)<<8)+(Math.round(s[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};h.hex.rgb=function(s){let e=s.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(l=>l+l).join(""));let r=parseInt(t,16),o=r>>16&255,i=r>>8&255,n=r&255;return[o,i,n]};h.rgb.hcg=function(s){let e=s[0]/255,t=s[1]/255,r=s[2]/255,o=Math.max(Math.max(e,t),r),i=Math.min(Math.min(e,t),r),n=o-i,l,c;return n<1?l=i/(1-n):l=0,n<=0?c=0:o===e?c=(t-r)/n%6:o===t?c=2+(r-e)/n:c=4+(e-t)/n,c/=6,c%=1,[c*360,n*100,l*100]};h.hsl.hcg=function(s){let e=s[1]/100,t=s[2]/100,r=t<.5?2*e*t:2*e*(1-t),o=0;return r<1&&(o=(t-.5*r)/(1-r)),[s[0],r*100,o*100]};h.hsv.hcg=function(s){let e=s[1]/100,t=s[2]/100,r=e*t,o=0;return r<1&&(o=(t-r)/(1-r)),[s[0],r*100,o*100]};h.hcg.rgb=function(s){let e=s[0]/360,t=s[1]/100,r=s[2]/100;if(t===0)return[r*255,r*255,r*255];let o=[0,0,0],i=e%1*6,n=i%1,l=1-n,c=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=n,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=n;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=n,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return c=(1-t)*r,[(t*o[0]+c)*255,(t*o[1]+c)*255,(t*o[2]+c)*255]};h.hcg.hsv=function(s){let e=s[1]/100,t=s[2]/100,r=e+t*(1-e),o=0;return r>0&&(o=e/r),[s[0],o*100,r*100]};h.hcg.hsl=function(s){let e=s[1]/100,r=s[2]/100*(1-e)+.5*e,o=0;return r>0&&r<.5?o=e/(2*r):r>=.5&&r<1&&(o=e/(2*(1-r))),[s[0],o*100,r*100]};h.hcg.hwb=function(s){let e=s[1]/100,t=s[2]/100,r=e+t*(1-e);return[s[0],(r-e)*100,(1-r)*100]};h.hwb.hcg=function(s){let e=s[1]/100,r=1-s[2]/100,o=r-e,i=0;return o<1&&(i=(r-o)/(1-o)),[s[0],o*100,i*100]};h.apple.rgb=function(s){return[s[0]/65535*255,s[1]/65535*255,s[2]/65535*255]};h.rgb.apple=function(s){return[s[0]/255*65535,s[1]/255*65535,s[2]/255*65535]};h.gray.rgb=function(s){return[s[0]/100*255,s[0]/100*255,s[0]/100*255]};h.gray.hsl=function(s){return[0,0,s[0]]};h.gray.hsv=h.gray.hsl;h.gray.hwb=function(s){return[0,100,s[0]]};h.gray.cmyk=function(s){return[0,0,0,s[0]]};h.gray.lab=function(s){return[s[0],0,0]};h.gray.hex=function(s){let e=Math.round(s[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r};h.rgb.gray=function(s){return[(s[0]+s[1]+s[2])/3/255*100]}});var Re=ue((pt,Ie)=>{var me=ve();function We(){let s={},e=Object.keys(me);for(let t=e.length,r=0;r<t;r++)s[e[r]]={distance:-1,parent:null};return s}a(We,"buildGraph");function Ke(s){let e=We(),t=[s];for(e[s].distance=0;t.length;){let r=t.pop(),o=Object.keys(me[r]);for(let i=o.length,n=0;n<i;n++){let l=o[n],c=e[l];c.distance===-1&&(c.distance=e[r].distance+1,c.parent=r,t.unshift(l))}}return e}a(Ke,"deriveBFS");function Je(s,e){return function(t){return e(s(t))}}a(Je,"link");function Qe(s,e){let t=[e[s].parent,s],r=me[e[s].parent][s],o=e[s].parent;for(;e[o].parent;)t.unshift(e[o].parent),r=Je(me[e[o].parent][o],r),o=e[o].parent;return r.conversion=t,r}a(Qe,"wrapConversion");Ie.exports=function(s){let e=Ke(s),t={},r=Object.keys(e);for(let o=r.length,i=0;i<o;i++){let n=r[i];e[n].parent!==null&&(t[n]=Qe(n,e))}return t}});var Fe=ue((Ct,De)=>{var xe=ve(),Ze=Re(),M={},et=Object.keys(xe);function tt(s){let e=a(function(...t){let r=t[0];return r==null?r:(r.length>1&&(t=r),s(t))},"wrappedFn");return"conversion"in s&&(e.conversion=s.conversion),e}a(tt,"wrapRaw");function rt(s){let e=a(function(...t){let r=t[0];if(r==null)return r;r.length>1&&(t=r);let o=s(t);if(typeof o=="object")for(let i=o.length,n=0;n<i;n++)o[n]=Math.round(o[n]);return o},"wrappedFn");return"conversion"in s&&(e.conversion=s.conversion),e}a(rt,"wrapRounded");et.forEach(s=>{M[s]={},Object.defineProperty(M[s],"channels",{value:xe[s].channels}),Object.defineProperty(M[s],"labels",{value:xe[s].labels});let e=Ze(s);Object.keys(e).forEach(r=>{let o=e[r];M[s][r]=rt(o),M[s][r].raw=tt(o)})});De.exports=M});var F=class{static{a(this,"Logger")}static forPrefix(e){return e?new we(e):new de}log(){throw"Subclass must implement"}info(...e){this.log("info",...e)}warn(...e){this.log("warn",...e)}},de=class extends F{static{a(this,"BufferedLogger")}constructor(){super(),this.messages=[]}log(...e){this.messages.push(e)}},we=class extends F{static{a(this,"PrefixedLogger")}constructor(e){super(),this.prefix=e===!0?"debug":e}dump(e){e instanceof de&&e.messages.forEach(t=>{this.log(...t)})}log(e,...t){if(typeof t[0]=="string"){let r=`[prefix:${this.prefix}]:${t[0]}`;console[e](r,...t.slice(1))}else console[e](this.prefix,...t)}},ye=F;var O=class s{static{a(this,"RichString")}static fromString(e){return e instanceof s?e:e?new s(String(e)):null}constructor(e){if(typeof e!="string")throw`You may only construct a RichString with a String, not a ${typeof e}`;this.string=e}capitalize(){return new s(this.string.charAt(0).toUpperCase()+this.string.slice(1))}decapitalize(){return new s(this.string.charAt(0).toLowerCase()+this.string.slice(1))}camelize(){return s.fromString(this.string.replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()}))}humanize(){return this.decamlize({spacer:" "}).capitalize()}decamlize({spacer:e="_"}={}){if(this.string.length<2)return new s(this.string.toLowerCase());let t=`$1${e}$2`,r=this.string.replace(/([\p{Lowercase_Letter}\d])(\p{Uppercase_Letter})/gu,t);return new s(r.replace(/(\p{Uppercase_Letter})(\p{Uppercase_Letter}\p{Lowercase_Letter}+)/gu,t).toLowerCase())}toString(){return this.string}toStringOrNull(){return this.string.trim()==""?null:this.string}};var d=class extends HTMLElement{static{a(this,"BaseCustomElement")}constructor(){super(),this.logger=ye.forPrefix(null)}static define(){if(!this.tagName)throw"To use BaseCustomElement, you must define the static member tagName to return your custom tag's name";customElements.define(this.tagName,this)}showWarningsChangedCallback({oldValue:e,newValue:t}){let r;!e&&t&&(r=this.logger);let o=t==""?this.id:t;this.logger=ye.forPrefix(o),r&&this.logger.dump(r)}attributeChangedCallback(e,t,r){let o=`${new O(e).camelize()}ChangedCallback`;this[o]?this[o]({oldValue:t,newValue:r}):this.constructor.observedAttributes.indexOf(e)!=-1&&console.warn("Observing %s but no method named %s was found to handle it",e,o),this.__render()}disconnectedCallback(){this.__disconnected=!0,this.__connected=!1,this.onDisconnected&&this.onDisconnected()}connectedCallback(){this.__connected=!0,this.__disconnected=!1,this.onConnected&&this.onConnected(),this.__render()}get isConnected(){return!!this.__connected}__render(){this.__disconnected||this.render&&this.render()}};var B=Te(Fe());var H=class extends Error{static{a(this,"NotValidHexCode")}constructor(e){super(`'${e}' is not a vaid hex code`)}};var ke=class s{static{a(this,"Color")}static HEX_REGEXP=new RegExp("^(#)?([a-fA-F0-9]{6})$");static fromHexCode(e,{onError:t="throw"}={}){if(e)try{return new s(e)}catch(r){if(r instanceof Error&&t=="return")return null;throw r}else return null}static fromHSL(e,t,r){return new s(B.default.hsl.hex(e,t,r))}static fromRGB(e,t,r){return new s(B.default.rgb.hex(parseInt(e),parseInt(t),parseInt(r)))}static random(){return s.fromRGB(Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256))}constructor(e){if(!e)throw new TypeError("Color must be given a hex code");let t=e.match(s.HEX_REGEXP);if(!t)throw new H(e);let[r,o,i]=t;this.hex=`#${i}`.toUpperCase()}luminance(){let[e,t,r]=B.default.hex.rgb(this.hex),o=e/255,i=t/255,n=r/255,l=o<.04045?o/12.92:Math.pow((o+.055)/1.055,2.4),c=i<.04045?i/12.92:Math.pow((i+.055)/1.055,2.4),u=n<.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);return .2126*l+.7152*c+.0722*u}contrast(e){let t=this.luminance(),r=e.luminance();if(t<r){let o=t;t=r,r=o}return(t+.05)/(r+.05)}hsl(){return B.default.hex.hsl.raw(this.hex)}lab(){return B.default.hex.lab.raw(this.hex)}hexCode(){return this.hex}},p=ke;var b=class extends d{static{a(this,"ColorNameComponent")}static tagName="g-color-name";static observedAttributes=["color-swatch","show-warnings"];static NAMES_BASED_ON_HUE=[["Red",[0,21]],["Orange",[21,41]],["Yellow",[41,74]],["Green",[74,167]],["Blue",[167,257]],["Purple",[257,333]],["Red",[333,360]]];constructor(){super(),this.updateNameEventListener=()=>{this.render()},this.inputChangeListener=e=>{let t=e.target.value;t&&String(t).trim()!=""?(e.target.dataset.userOverride=!0,this.dispatchEvent(new CustomEvent("name-change",{cancelable:!1,bubbles:!0}))):(delete e.target.dataset.userOverride,this.dispatchEvent(new CustomEvent("name-cleared",{cancelable:!1,bubbles:!0}))),this.render()}}onDisconnected(){this.colorSwatch&&this.colorSwatch.removeEventListener("hex-code-change",this.updateNameEventListener),this.input&&this.input.removeEventListener("change",this.inputChangeListener)}colorSwatchChangedCallback({newValue:e}){let t=document.getElementById(e);t!=this.colorSwatch&&(this.colorSwatch&&this.colorSwatch.removeEventListener("hex-code-change",this.updateNameEventListener),t&&(this.updateNameEventListener.id=`listener-${this.id}`,t.addEventListener("hex-code-change",this.updateNameEventListener))),this.colorSwatch=t}_input(){let e=this.querySelectorAll("input[type=text]");return e.length>1&&this.logger.warn("There is more than one input - only the first one found will be used"),e[0]}render(){let e=this._input();this.input!=e&&(this.input&&this.input.removeEventListener("change",this.inputChangeListener),e&&e.addEventListener("change",this.inputChangeListener),this.input=e),e&&!e.dataset.userOverride&&this.colorSwatch&&this.colorSwatch.hexCode&&(e.value=this._name(this.colorSwatch.hexCode))}get name(){let e=this._input();return e?e.value:null}get userOverride(){let e=this._input();return e?e.dataset.userOverride:!1}overrideColorName(e){let t=this._input();t&&(t.dataset.userOverride=!0,t.value=e)}restoreDefaultColorName(){let e=this._input();e&&(delete e.dataset.userOverride,e.value="",this.render())}_name(e){let[t,r,o]=p.fromHexCode(e).hsl();if(isNaN(t)||r==0)return"Gray";let i=this.constructor.NAMES_BASED_ON_HUE.find(([n,[l,c]])=>{if(t>=l&&t<=c)return!0});if(!i)throw`Something is wrong: ${e}'s hue of '${t}' was not in namesBasedOnHue`;return i[0]}};var f=class{static{a(this,"BaseDerivation")}hsl(e){return p.fromHexCode(e).hsl()}hexCode(e,t,r){return p.fromHSL(e,t,r).hexCode()}};var j=class extends f{static{a(this,"BrightnessDerivation")}derive(e,t={}){return t.darken&&!isNaN(t.darken)?this.darken(e,t.darken):t.brighten&&!isNaN(t.brighten)?this.brighten(e,t.brighten):e}darken(e,t){let[r,o,i]=this.hsl(e),n=i,l=t/100,c=n*l,u=i-c;return this.hexCode(r,o,u)}brighten(e,t){let[r,o,i]=this.hsl(e),n=100-i,l=t/100,c=n*l,u=i+c;return this.hexCode(r,o,u)}};var S=class extends f{static{a(this,"ComplementaryDerivation")}derive(e,t={}){let[r,o,i]=this.hsl(e),n=(r+180)%360;return this.hexCode(n,o,i)}get humanName(){return"Complement"}};var $=class extends f{static{a(this,"AnalogousUpperDerivation")}derive(e,t={}){let[r,o,i]=this.hsl(e),n=(r+330)%360;return this.hexCode(n,o,i)}get humanName(){return"Analogous"}},P=class extends f{static{a(this,"AnalogousLowerDerivation")}derive(e,t={}){let[r,o,i]=this.hsl(e),n=(r+30)%360;return this.hexCode(n,o,i)}get humanName(){return"Analogous"}};var fe=class extends f{static{a(this,"SplitComplementaryUpperDerivation")}constructor(){super(),this.complementary=new S,this.analogousUpper=new $}derive(e,t={}){return this.analogousUpper.derive(this.complementary.derive(e))}get humanName(){return"Splt. Comp."}},ge=class extends f{static{a(this,"SplitComplementaryLowerDerivation")}constructor(){super(),this.complementary=new S,this.analogousLower=new P}derive(e,t={}){return this.analogousLower.derive(this.complementary.derive(e))}get humanName(){return"Splt. Comp."}};var pe=class extends f{static{a(this,"TriadUpperDerivation")}derive(e,t={}){let[r,o,i]=this.hsl(e),n=(r+120)%360;return this.hexCode(n,o,i)}get humanName(){return"Triad"}},be=class extends f{static{a(this,"TriadLowerDerivation")}derive(e,t={}){let[r,o,i]=this.hsl(e),n=(r+240)%360;return this.hexCode(n,o,i)}get humanName(){return"Triad"}};var I=class s{static{a(this,"DerivationAlgorithm")}static fromString(e,{throwOnUnknown:t=!1}={}){if(e instanceof s)return e;if(e=="brightness")return new j;if(e=="complement")return new S;if(e=="split-complement-lower")return new ge;if(e=="split-complement-upper")return new fe;if(e=="analogous-lower")return new P;if(e=="analogous-upper")return new $;if(e=="triad-lower")return new be;if(e=="triad-upper")return new pe;if(t)throw`No such DerivationAlgorithm '${e}'`;return null}};var v=class extends d{static{a(this,"ColorSwatchComponent")}static tagName="g-color-swatch";static observedAttributes=["hex-code","derived-from","derivation-algorithm","darken-by","brighten-by","show-warnings","default-link-context"];constructor(){super(),this.onInputChangeCallback=e=>{this.setAttribute("hex-code",e.target.value)},this.onDerivedElementChangeCallback=e=>{e.target!=this.derivedFromElement&&this.logger.warn("Got an event from not our derived"),this._deriveHexCodeFromSwatch(e.target)},this.derivationAlgorithm=I.fromString("brightness",{throwOnUnknown:!0})}hexCodeChangedCallback({newValue:e}){this.hexCode=e,this._dispatchHexcodeChanged()}derivedFromChangedCallback({newValue:e}){this.derivedFromElement&&this.derivedFromElement.removeEventListener(this.hexCodeChangedEventName,this.onDerivedElementChangeCallback),this.derivedFromId=e}defaultLinkContextChangedCallback({newValue:e}){this.defaultLinkContext=e}darkenByChangedCallback({newValue:e}){this.darkenBy=e,this._updateDerivationifNeeded({whenHexCodeExists:!0})}brightenByChangedCallback({newValue:e}){this.brightenBy=e,this._updateDerivationifNeeded({whenHexCodeExists:!0})}derivationAlgorithmChangedCallback({newValue:e}){this.derivationAlgorithm=I.fromString(e),this.derivationAlgorithm?this._updateDerivationifNeeded({whenHexCodeExists:!0}):e&&this.logger.warn("derivation-algorithm '%s' is not valid",e)}_eachInput(e){let t=this.querySelectorAll("input");return t.forEach(e),t.length}_eachDataColor(e){let t=this.querySelectorAll("[data-color]");return t.forEach(e),t.length}_eachCodeElementInsideRelevantLabel(e){this.querySelectorAll("label").forEach(t=>{let r;if(t.htmlFor?r=this.querySelector(`[id=${t.htmlFor}][type=color]`):r=t.querySelector("input[type=color]"),r){let o=t.querySelector("code");o||(o=document.createElement("code"),t.appendChild(o)),e(o)}else this.logger.warn("Orphaned label inside the element does not wrap nor reference a color input inside the element: %o",t)}),this.querySelectorAll("[data-hexcode]").forEach(t=>{let r=t.querySelector("code");r||(r=document.createElement("code"),t.appendChild(r)),e(r)})}render(){let e=this._eachInput(r=>{r.value=this.hexCode,r.addEventListener("change",this.onInputChangeCallback),r.getAttributeNames().indexOf("disabled")!=-1||this.derivedFromId&&this.logger.warn("derived-from-id is set, but an enabled input was detected: %o",r)});this._eachDataColor(r=>{r.style.backgroundColor=this.hexCode})==0&&e==0&&this.logger.warn("There were no <input type=color> nor [data-color] elements found"),this._eachLinkContext(r=>{this.defaultLinkContext?r.textContent=this.defaultLinkContext:r.innerHTML="&nbsp;"}),this.derivedFromId&&this._updateDerivationifNeeded({whenHexCodeExists:!1}),this.hexCode?this._eachCodeElementInsideRelevantLabel(r=>{r.textContent=this.hexCode}):this._eachCodeElementInsideRelevantLabel(r=>{r.textContent=""})}_deriveHexCodeFromSwatch(e){let t=e.hexCode;t?this._deriveHexCodeFrom(t):(this.logger.warn("No hexcode on the derived element: %o",event.target),this.removeAttribute("hex-code"))}_deriveHexCodeFrom(e){let t=this.darkenBy?parseInt(this.darkenBy):null,r=this.brightenBy?parseInt(this.brightenBy):null;this.derivationAlgorithm&&(e=this.derivationAlgorithm.derive(e,{darken:t,brighten:r})),this.setAttribute("hex-code",e)}_eachLinkContext(e){this.querySelectorAll("[data-link-context]").forEach(e)}get derivedFromElement(){return document.getElementById(this.derivedFromId)}_updateDerivationifNeeded({whenHexCodeExists:e}){let t=this.derivedFromElement,r=!!this.hexCode;t&&(t.tagName.toLowerCase()==this.constructor.tagName?(t.addEventListener(this.hexCodeChangedEventName,this.onDerivedElementChangeCallback),t.hexCode&&e==r&&this._deriveHexCodeFrom(t.hexCode),this._eachLinkContext(o=>o.textContent=this.derivationAlgorithm.humanName)):this.logger.warn("Derived element has id '%s', but this is a %s, not a %s",this.derivedFromId,t.tagName,this.constructor.tagName))}get hexCodeChangedEventName(){return"hex-code-change"}_dispatchHexcodeChanged(){this.dispatchEvent(new CustomEvent(this.hexCodeChangedEventName,{cancelable:!1,bubbles:!0}))}get forTesting(){return{dispatchHexCodeChanged:()=>{this._dispatchHexcodeChanged()}}}};var x=class{static{a(this,"BaseGradient")}get isFallback(){return!1}valueFor(){throw"Subclass must implement"}};var Y=class extends x{static{a(this,"LinearGradient")}valueFor(e,t){let r=(t-1)/2;if(e<r){let o=e,i=r,n=40,l=80,c=o/(i-1);return isNaN(c)&&(c=0),["darken-by",Math.floor(l-c*(l-n))]}else{let o=t-1-e,i=r,n=30,l=90,c=o/(i-1);return isNaN(c)&&(c=0),["brighten-by",Math.floor(l-c*(l-n))]}}};var z=class extends x{static{a(this,"ExponentialGradient")}valueFor(e,t){let r=(t-1)/2,o=e+1,i=r+1,l=(o-i)/i,c=this._quarticBabyYeah(l);return e<r?["darken-by",-1*c]:["brighten-by",c]}_quarticBabyYeah(e){return 7.990513+173.3344*e+-3.832653*Math.pow(e,2)+-88.37532*Math.pow(e,3)+0*Math.pow(e,4)}};var V=class extends x{static{a(this,"NoGradient")}get isFallback(){return!0}valueFor(){return[]}};var X=class{static{a(this,"ColorScale")}static fromString(e){return e=="linear"?new Y:e=="exponential"?new z:new V}};var T=class{static{a(this,"SpecialButtons")}constructor(e,t,r){this.parentElement=e,this.selector=t,this.clickListener=r}enable(){this.forEach(e=>e.removeAttribute("disabled"))}disable(){this.forEach(e=>e.setAttribute("disabled",!0))}addEventListeners(){this.forEach(e=>e.addEventListener("click",this.clickListener))}forEach(e){return this.parentElement.querySelectorAll(this.selector).forEach(e)}dispatchEvent(e,t){return this.parentElement.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t}))}},Se=class extends T{static{a(this,"PreviewButtons")}constructor(e){super(e,"[data-preview]",()=>{let t={colorName:e.colorName,colorNameUserOverride:e.colorNameUserOverride,colorScale:e.colorScale,baseColor:e.baseColorSwatch.hexCode};this.dispatchEvent("preview-scale",t)})}},Ee=class extends T{static{a(this,"UnlinkButtons")}constructor(e){super(e,"[data-unlink]",()=>{e.removeAttribute("linked-to-primary"),e.baseColorSwatch&&(e.baseColorSwatch.removeAttribute("derived-from"),e.baseColorSwatch.removeAttribute("derivation-algorithm"),e.baseColorSwatch.querySelectorAll("input[type=color][disabled]").forEach(t=>{t.removeAttribute("disabled")})),this.dispatchEvent("unlink-from-primary")})}},Ne=class extends T{static{a(this,"RemoveButtons")}constructor(e){super(e,"[data-remove]",()=>{e.parentElement.removeChild(e),this.dispatchEvent("remove-scale")})}},C=class extends d{static{a(this,"PaletteColorComponent")}static tagName="g-palette-color-scale";static observedAttributes=["primary","linked-to-primary","scale-algorithm","show-warnings"];constructor(){super(),this.previewButtons=new Se(this),this.unlinkButtons=new Ee(this),this.removeButtons=new Ne(this),this.baseColorChangedEventHandler=e=>{this.linkedPrimaryAlgorithm||this.dispatchEvent(new CustomEvent("base-color-changed",{cancelable:!1,bubbles:!0}))}}primaryChangedCallback({newValue:e}){this.isPrimary=String(e)==="",e!=""&&e!=null&&this.logger.warn("primary should either be present or omitted, not '%s'",e)}linkedToPrimaryChangedCallback({newValue:e}){this.linkedPrimaryAlgorithm=e}scaleAlgorithmChangedCallback({newValue:e}){this.scaleAlgorithm=e}render(){this._configureButtons(),this._configureLink(),this._configureScale()}get swatches(){return this.querySelectorAll(v.tagName)}get baseColorSwatch(){let e=(this.swatches.length-1)/2;return this.swatches[e]}_configureScale(){let e=this.baseColorSwatch.id;e||(e=`${v.tagName}-${crypto.randomUUID()}-generated`,this.baseColorSwatch.id=e),this.linkedPrimaryElement&&(this.linkedPrimaryElement.baseColorSwatch?(this.baseColorSwatch.setAttribute("derived-from",this.linkedPrimaryElement.baseColorSwatch.id),this.linkedPrimaryAlgorithm&&this.baseColorSwatch.setAttribute("derivation-algorithm",this.linkedPrimaryAlgorithm)):this.logger.warn("Linked g-palette-color-scale (%s) has no base color, so we cannot link to it",this.linkedPrimaryElement.id));let t=X.fromString(this.scaleAlgorithm);t.isFallback&&this.scaleAlgorithm&&this.logger.warn(`No such algorithm for derive-color-scale '${this.scaleAlgorithm}'`),this.swatches.forEach((r,o,i)=>{if(r!=this.baseColorSwatch){r.getAttribute("derived-from")||r.setAttribute("derived-from",e),r.getAttribute("derivation-algorithm")||r.setAttribute("derivation-algorithm","brightness");let[n,l]=t.valueFor(o,i.length);n&&!r.getAttribute(n)&&r.setAttribute(n,`${Math.floor(l)}%`)}}),this.baseColorSwatch.addEventListener("hex-code-change",this.baseColorChangedEventHandler)}_configureButtons(){this.isPrimary?(this.previewButtons.enable(),this.unlinkButtons.disable(),this.removeButtons.disable()):this.linkedPrimaryAlgorithm?(this.previewButtons.enable(),this.unlinkButtons.enable(),this.removeButtons.enable()):(this.previewButtons.enable(),this.unlinkButtons.disable(),this.removeButtons.enable()),this.previewButtons.addEventListeners(),this.unlinkButtons.addEventListeners(),this.removeButtons.addEventListeners()}_configureLink(){this.linkedPrimaryAlgorithm&&(this.linkedPrimaryElement=this.parentElement?this.parentElement.querySelector(`${this.constructor.tagName}[primary]`):null,this.linkedPrimaryElement||(this.parentElement?this.logger.warn("linked-to-primary had a value ('%s') but no sibling is marked as primary",this.linkedPrimaryAlgorithm):this.logger.warn("linked-to-primary had a value ('%s') but we have no parent element",this.linkedPrimaryAlgorithm)))}get colorName(){let e=this.querySelector(b.tagName);return e?e.name:null}overrideColorName(e){let t=this.querySelector(b.tagName);t&&t.overrideColorName(e)}restoreDefaultColorName(){let e=this.querySelector(b.tagName);e&&e.restoreDefaultColorName()}get colorNameUserOverride(){let e=this.querySelector(b.tagName);return e&&e.userOverride}get colorScale(){return Array.from(this.querySelectorAll(v.tagName)).map(e=>e.hexCode)}};var G=class extends d{static{a(this,"AddColorScaleButtonComponent")}static tagName="g-add-color-scale-button";static observedAttributes=["link-algorithm","palette","show-warnings"];constructor(){super(),this.addScaleClickListener=e=>{e.preventDefault(),this.addColorScales()}}linkAlgorithmChangedCallback({newValue:e}){this.algorithmName=e}paletteChangedCallback({newValue:e}){this.paletteId=e}get palette(){let e;if(this.paletteId)e=document.getElementById(this.paletteId),e?e.tagName.toLowerCase()!="g-palette"&&this.logger.warn("Element with id '%s' is not a g-palette, but a %s",this.paletteId,e.tagName):this.isConnected&&this.logger.warn("No element with id '%s' found in document",this.paletteId);else{let t=document.querySelectorAll("g-palette");t.length>1&&this.logger.warn("More than one g-palette found in document - behavior is not defined in this case"),e=t[0]}return e}render(){let e=this.querySelectorAll("button");e.length==0&&this.logger.warn("No <button> elements found within - this won't do anythning"),e.forEach(t=>{t.addEventListener("click",this.addScaleClickListener)})}static nameToAlgo={complement:["complement"],"split-complement":["split-complement-lower","split-complement-upper"],analogous:["analogous-lower","analogous-upper"],triad:["triad-lower","triad-upper"]};addColorScales(){if(this.palette)if(this.algorithmName){let e=this.constructor.nameToAlgo[this.algorithmName];e?e.forEach(t=>{this.palette.addScale({linkAlgorithm:t})}):this.logger.warn(`No such algorithm ${this.algorithmName}`)}else this.palette.addScale({hexCode:p.random().hexCode()})}};var k=class extends d{static{a(this,"AttributeCheckboxComponent")}static tagName="g-attribute-checkbox";static observedAttributes=["element","attribute-name","show-warnings"];constructor(){super(),this.checkboxChangeListener=e=>{this._updateElement()}}elementChangedCallback({newValue:e}){e?(this.element=document.getElementById(e),this.isConnected&&!this.element&&this.logger.warn("No such element in the document with id '%s'",e)):(this.element=null,this.checkbox.removeEventListener("change",this.checkboxChangeListener))}attributeNameChangedCallback({newValue:e}){this.attributeName=e}render(){this.checkbox.addEventListener("change",this.checkboxChangeListener),this._updateElement()}_updateElement(){this.element&&this.attributeName&&(this.checkbox.checked?this.element.setAttribute(this.attributeName,!0):this.element.removeAttribute(this.attributeName))}check(){this.checkbox&&(this.checkbox.checked=!0,this.render())}uncheck(){this.checkbox&&(this.checkbox.checked=!1,this.render())}get checkbox(){let e=this.querySelectorAll("input[type=checkbox]");if(e.length==0){this.logger.warn("No checkboxes found inside element");return}return e.length>1&&this.logger.warn("More than one checkbox found - behavior is not defined"),e[0]}get checked(){return this.checkbox&&this.checkbox.checked}};var Ae=class{static{a(this,"AnimatorPreferences")}constructor(){let e=window.matchMedia("(prefers-reduced-motion)").matches;this.immediateAlways=e,document.body.dataset.animatorImmediate==="true"?this.immediateAlways=!0:document.body.dataset.animatorImmediate==="false"&&(this.immediateAlways=!1)}},Oe=Ae;var Le=class{static{a(this,"Animator")}constructor(e,{duration:t,easing:r,styles:o,animatorPreferences:i}){this.element=e,this.duration=t||500,this.easing=r||"ease-in",this.animatorPreferences=new Oe,this.from={},this.to={},this.whenDoneForward=[],this.whenDoneBackward=[],Object.entries(o).forEach(n=>{let l=n[0],c=n[1];this.from[l]=c.from,this.to[l]=c.to,this.whenDoneForward.push(()=>{this.element.style[l]=c.to}),this.whenDoneBackward.push(()=>{this.element.style[l]=c.from})})}animateForward(e){return this.animatorPreferences.immediateAlways?(this.setForwardNow(),Promise.resolve()):this._animate(this.from,this.to,e).then(()=>this.setForwardNow())}setForwardNow(){this.whenDoneForward.forEach(e=>e())}animateBackward(e){return this.animatorPreferences.immediateAlways?(this.setBackwardNow(),Promise.resolve()):this._animate(this.to,this.from,e).then(()=>this.setBackwardNow())}setBackwardNow(){this.whenDoneBackward.forEach(e=>e())}_animate(e,t,r){return this.element.animate([e,t],{duration:r||this.duration,easing:this.easing}).finished}},Ue=Le;var W=class extends d{static{a(this,"CopyCodeComponent")}static tagName="g-copy-code";static observedAttributes=["code","show-warnings"];codeChangedCallback({newValue:e}){this.codeElementId=e}constructor(){super(),this.clickListener=e=>{e.preventDefault();let t=document.getElementById(this.codeElementId);if(!t){this.logger.warn(`No element with id '${codeElementId}'`);return}let r=document.createElement("textarea");document.body.appendChild(r),console.log(t.textContent),r.value=t.textContent,r.focus(),r.select(),document.execCommand("copy"),document.body.removeChild(r),this.querySelectorAll("[data-copied-message]").forEach(o=>{let i=new Ue(o,{styles:{opacity:{from:"0",to:"100"}}});o.style.opacity="0",o.style.display="block",i.animateForward(250).then(()=>{setTimeout(()=>{i.animateBackward().then(()=>{o.style.display="none"})},1e3)})})}}render(){console.log("render");let e=this.querySelector("button");if(!e){this.logger.warn("Could not find a button, so can't do anything");return}e.addEventListener("click",this.clickListener)}};var K=class{static{a(this,"ColorShades")}constructor(e,t){if(!e)throw"name is required to create a ColorShades";if(!t)throw"scale is required to create a ColorShades";this.name=e,this.scale=t}};var w=class{static{a(this,"Generator")}constructor(e){this.colorShades=e}_eachColor({reverse:e,beforeGroup:t,afterGroup:r,onColor:o}){if(t||(t=a(()=>{},"beforeGroup")),r||(r=a(()=>{},"afterGroup")),!o)throw"onColor must be defined in _eachColor";let i={};this.colorShades.forEach(n=>{let l=n.name.toString();i[l]?(i[l]=i[l]+1,l=`${l}${i[l]}`):i[l]=1,t(l);let c=n.scale;e&&(c=c.reverse()),c.forEach((u,g,m)=>{o(l,u,g,m)}),r(l)})}};var N=class extends w{static{a(this,"CSSGenerator")}blob(){let e={},t=["/*",window.location," */",""];return t.push(":root {"),t.push(""),this._eachColor({beforeGroup:()=>t.push(""),onColor:(r,o,i,n)=>{t.push(this._variableName(r,o,i,n))}}),t.push("}"),new Blob([t.join(`
`)],{type:"text/css"})}_variableName(e,t,r,o){return`  --${e.toLowerCase()}-${r+1}: ${t};`}};var J=class extends w{static{a(this,"CSVGenerator")}blob(){let e=[["Color Category","Hex"].join(",")];return this._eachColor({onColor:(t,r,o)=>{e.push([t.toString().replaceAll(/['\",]/g,"-")+"-"+(o+1),r].join(","))}}),new Blob([e.join(`
`)],{type:"text/csv"})}};var Q=class extends w{static{a(this,"MelangeConfigGenerator")}blob(){let e=[];return this._eachColor({beforeGroup:t=>{e.push("colorTints.register("),e.push(`  "${t.toString().toLowerCase()}",`),e.push("  [")},afterGroup:t=>{e.push("  ]"),e.push(")"),e.push("")},onColor:(t,r,o,i)=>{e.push(`    "${r}",`)},reverse:!0}),new Blob([e.join(`
`)],{type:"text/plain"})}};var Z=class extends N{static{a(this,"MelangeGenerator")}static shadeNames={9:["-100","-200","-300","-400","-500","-600","-700","-800","-900"],7:["-100","-200","-300","-500","-700","-800","-900"],5:["-100","-300","-500","-700","-900"]};static melanageRecognizedColors=["red","blue","gray","green","orange","purple","red","yellow"];_variableName(e,t,r,o){let i=String(o.length),n=this.constructor.shadeNames[i];if(!n)throw`MelangeCSSVariablesGenerator cannot work with ${o.length} shades. Must be 5, 7, or 9`;let l=n[r],c=e.toLowerCase();return`${this.constructor.melanageRecognizedColors.indexOf(c)!=-1?"":`  /* WARNING: this name is not recognized by Melange */
`}  --mg-${c}${l}: ${t};`}};var ee=class extends w{static{a(this,"TailwindGenerator")}blob(){let e=this.colorShades[0].scale.length;if(e!=9&&e!=7&&e!=5)throw`TailwindConfigurationGenerator is not compatible with ${e} shades. Must be 9, 7, or 5`;let t=[`// ${window.location}`,"","colors: {","  transparent: 'transparent',","  current: 'currentColor',"];return this._eachColor({reverse:!0,beforeGroup:r=>{t.push(`  "${r}": {`)},onColor:(r,o,i,n)=>{i==0?(t.push(`    50: "${o}",`),t.push(`    100: "${o}",`),n.length<9&&t.push(`    200: "${o}",`)):i==n.length-1?(n.length<9&&t.push(`    800: "${o}",`),t.push(`    900: "${o}",`),t.push(`    950: "${o}",`)):n.length==5?i==1?(t.push(`    300: "${o}",`),t.push(`    400: "${o}",`)):i==n.length-2?(t.push(`    600: "${o}",`),t.push(`    700: "${o}",`)):t.push(`    500: "${o}",`):n.length<9?t.push(`    ${i+2}00: "${o}",`):t.push(`    ${i+1}00: "${o}",`)},afterGroup:r=>{t.push("  },")}}),t.push("}"),new Blob([t.join(`
`)],{type:"text/plain"})}};var te=class extends d{static{a(this,"DownloadPaletteComponent")}static tagName="g-download-palette";static observedAttributes=["palette","generator","debug"];static generators={css:N,melange:Z,"melange-config":Q,tailwind:ee,csv:J};constructor(){super(),this.linkClickListener=e=>{this._generate()}}paletteChangedCallback({newValue:e}){e?(this.palette=document.getElementById(e),this.isConnected&&!this.palette&&this.logger.warn("No such element in the document with id '%s'",e)):(this.palette=null,this.link.removeEventListener("click",this.linkClickListener))}generatorChangedCallback({newValue:e}){e?(this.generator=this.constructor.generators[e],this.generator||this.logger.warn("No such generator '%s'",e)):this.generator=null}render(){this.link.addEventListener("click",this.linkClickListener)}_generate(){if(this.palette&&this.generator){let e=Array.from(this.palette.querySelectorAll("g-palette-color-scale")).map(o=>new K(o.colorName,o.colorScale)).filter(o=>!!o),t=new this.generator(e).blob(),r=URL.createObjectURL(t);window.location=r}}get link(){let e=this.querySelectorAll("a");if(e.length==0){this.logger.warn("No links found inside element");return}return e.length>1&&this.logger.warn("More than one link found - behavior is not defined"),e[0]}};var _e=class{static{a(this,"PrettifiedHTML")}constructor(e){this._string=String(e),this.prettified=null}set string(e){this._string=e,this.prettified=null}get string(){return this._string}toString(){if(!this.prettified){let e=this._mergeAttributesWithElements(this.string);this.prettified=this._addIndentation(e)}return this.prettified}_mergeAttributesWithElements(e){let t=e.trim().replace(/(^(\s|\t)+|(( |\t)+)$)/gm,"").split(`
`),r=[],o="";for(let i=0;i<t.length;i+=1){let n=t[i];if(n.endsWith("/>")){r.push(`${o}${n.slice(0,-2)} />`),o="";continue}if(n.endsWith(">")){r.push(`${o}${n.startsWith(">")||n.startsWith("<")?"":" "}${n}`),o="";continue}o+=o.length?` ${n}`:n}return r}_addIndentation(e){let t=" ",o=0,i=[];return e.reverse().reduce((n,l)=>{i.length&&o&&i[o]&&i[o]===l.substring(1,i[o].length+1)&&(i.splice(o,1),o--);let u=[`${t.repeat(o?o*2:0)}${l}`,...n];return l.substring(0,2)==="</"&&(o++,i[o]=l.substring(2,l.length-1)),u},[]).join(`
`)}},re=class s extends HTMLElement{static{a(this,"ElementSourceComponent")}static observedAttributes=["element-id","element-sibling","html"];constructor(){super(),this.htmlToShow="outer"}connectedCallback(){this.$code=this.querySelector("code"),this.render()}attributeChangedCallback(e,t,r){e=="element-id"?this.element=document.getElementById(r):e=="element-sibling"?this.element=this.parentElement.querySelector(r):e=="html"&&(this.htmlToShow=r),this.render()}render(){this.element&&this.$code&&(this.$code.innerText=new _e(this.htmlToShow=="inner"?this.element.innerHTML:this.element.outerHTML).toString())}static tagName="g-element-source";static define(){customElements.define(this.tagName,s)}};var A=class extends d{static{a(this,"PreviewColorSelectionComponent")}static tagName="g-preview-color-selection";static observedAttributes=["color-scale","show-warnings"];colorScaleChangedCallback({newValue:e}){let t=(e||"").split(/,/);t==[""]&&(t=[]),this.colorScale=t}render(){if(this.colorScale){if(this.querySelectorAll("[data-background] g-color-swatch").forEach((e,t,r)=>{if(t==0||t==r.length-1)return;let o=t-1;this.colorScale[o]&&e.setAttribute("hex-code",this.colorScale[o])}),this.querySelectorAll("[data-text] g-color-swatch").forEach((e,t,r)=>{if(t==0||t==r.length-1)return;let o=t-1;this.colorScale[o]&&e.setAttribute("hex-code",this.colorScale[o])}),this.querySelectorAll("input[type=radio][name='text-color']:checked").length==0){let e=`input[type=radio][name='text-color'][value='${this.colorScale[0]}']`,t=this.querySelector(e);t&&t.click()}if(this.querySelectorAll("input[type=radio][name='background-color']:checked").length==0){let e=`input[type=radio][name='background-color'][value='${this.colorScale[this.colorScale.length-1]}']`,t=this.querySelector(e);t&&t.click()}}}};var L=class extends d{static{a(this,"PreviewTextComponent")}static tagName="g-preview-text";static observedAttributes=["background-color","text-color","show-warnings","form"];formChangedCallback({newValue:e}){this.formName=e}constructor(){super(),this.formElementChangeListener=e=>{this._updateColors(e.target)}}backgroundColorChangedCallback({newValue:e}){this.backgroundColor=e}textColorChangedCallback({newValue:e}){this.textColor=e}get form(){return this.formName?document.querySelector(`form[name='${this.formName}']`):null}render(){this.form&&Array.from(this.form.elements).forEach(e=>{e.addEventListener("change",this.formElementChangeListener)}),this.backgroundColor?this.style.backgroundColor=this.backgroundColor:this.style.backgroundColor="transparent",this.textColor?this.style.color=this.textColor:this.style.color="currentColor"}_updateColors(e){e.name=="text-color"?this.setAttribute("text-color",e.value):e.name=="background-color"&&(this.setAttribute("background-color",e.value),this.render())}};var _=class extends d{static{a(this,"PreviewControlsComponent")}static tagName="g-preview-controls";static observedAttributes=["background-color","text-color","color-scale","show-warnings","form"];formChangedCallback({newValue:e}){this.formName=e}constructor(){super(),this.formElementChangeListener=e=>{this._updateColors(e.target)},this.colorScale=[]}backgroundColorChangedCallback({newValue:e}){this.backgroundColor=e}textColorChangedCallback({newValue:e}){this.textColor=e}colorScaleChangedCallback({newValue:e}){e?this.colorScale=e.split(/,/):this.colorScale=[]}get form(){return this.formName?document.querySelector(`form[name='${this.formName}']`):null}render(){this.form&&Array.from(this.form.elements).forEach(t=>{t.addEventListener("change",this.formElementChangeListener)}),this.querySelectorAll("div[data-container]").forEach(t=>t.parentElement.removeChild(t));let e=this.querySelector("fieldset");if(!e){this.logger.warn("no <fieldset> found, so cannot do any previewing");return}this.colorScale.forEach(t=>{let r=document.createElement("div");r.classList.add("flex","gap-2","pa-2"),r.dataset.container=!0;let o=e.cloneNode(!0);o.style.display="flex",this.backgroundColor?o.style.backgroundColor=this.backgroundColor:o.style.backgroundColor="transparent",o.querySelectorAll("button").forEach(n=>{n.style.color=this.colorScale[0],n.style.backgroundColor=this.colorScale[this.colorScale.length-1],n.style.borderColor=t}),o.querySelectorAll("input").forEach(n=>{n.style.color=this.colorScale[0],n.style.backgroundColor=this.colorScale[this.colorScale.length-1],n.style.borderColor=t});let i=e.cloneNode(!0);i.style.display="flex",i.dataset.added=!0,this.backgroundColor?i.style.backgroundColor=this.colorScale[this.colorScale.length-1]:i.style.backgroundColor="transparent",i.querySelectorAll("button").forEach(n=>{n.style.color=this.textColor,n.style.backgroundColor=this.backgroundColor,n.style.borderColor=t,n.textContent=t}),i.querySelectorAll("input").forEach(n=>{n.style.color=this.textColor,n.style.backgroundColor=this.backgroundColor,n.style.borderColor=t}),r.appendChild(o),r.appendChild(i),e.parentElement.appendChild(r)})}_updateColors(e){e.name=="text-color"?this.setAttribute("text-color",e.value):e.name=="background-color"&&(this.setAttribute("background-color",e.value),this.render())}};var q=class extends d{static{a(this,"PreviewComponent")}static tagName="g-preview";static observedAttributes=["show-warnings"];constructor(){super(),this.colorScale=[]}set colorScale(e){this._colorScale=e,this.render()}get colorScale(){return this._colorScale||[]}render(){this.querySelectorAll(A.tagName).forEach(e=>{e.setAttribute("color-scale",this.colorScale.join(","))}),this.querySelectorAll(L.tagName).forEach(e=>{e.setAttribute("background-color",this.colorScale[this.colorScale.length-1]),e.setAttribute("text-color",this.colorScale[0])}),this.querySelectorAll(_.tagName).forEach(e=>{e.setAttribute("background-color",this.colorScale[this.colorScale.length-1]),e.setAttribute("text-color",this.colorScale[0]),e.setAttribute("color-scale",this.colorScale.join(","))})}};var E=class{static{a(this,"Palette")}constructor(e,t,r){this.primaryColor=e,this.otherColors=t||[],this.compact=!!r}withPrimaryColor(e){this.primaryColor&&this.primaryColor.whenHexCode(e)}whenPrimaryNameUserOverride(e){this.primaryColor&&this.primaryColor.whenNameUserOverride(e)}whenPrimaryNameDefault(e){this.primaryColor&&this.primaryColor.whenNameDefault(e)}};var y=class{static{a(this,"PaletteEntry")}constructor({hexCode:e,userSuppliedName:t,algorithm:r}){if(e&&r)throw"You may not provide both hexCode and algorithm";if(!e&&!r)throw"You must provide hexCode or algorithm";this.hexCode=e,this.userSuppliedName=t,this.algorithm=r}get colorNameUserOverride(){return!!this.userSuppliedName}whenHexCode(e){this.hexCode&&e(this.hexCode)}whenAlgorithm(e){this.algorithm&&e(this.algorithm)}whenNameUserOverride(e){this.colorNameUserOverride&&e(this.userSuppliedName)}whenNameDefault(e){this.colorNameUserOverride||e()}};var oe=class{static{a(this,"SaveablePaletteState")}start(){this.pushState(window.location.toString(),{setURL:!1})}savePalette(e){let t=new URL(window.location),r=t.toString();e.primaryColor&&t.searchParams.set("primaryColor",e.primaryColor.userSuppliedName?`${e.primaryColor.hexCode}:${e.primaryColor.userSuppliedName}`:e.primaryColor.hexCode);let o=e.otherColors.map(i=>{console.log(i);let n=i.hexCode||i.algorithm;return i.userSuppliedName&&(n=n+":"+i.userSuppliedName),n}).join(",");t.searchParams.set("otherColors",o),t.searchParams.set("compact",String(!!e.compact)),r!=t.toString()&&this.pushState(t.toString(),{setURL:!0})}loadPalette(){let e=new URL(window.location),t=e.searchParams.get("primaryColor");if(t){let r=e.searchParams.get("compact")=="true",o=e.searchParams.get("otherColors"),[i,n]=t.split(/:/),l=p.fromHexCode(i),c=[],u=new y({hexCode:l.hexCode(),userSuppliedName:n});return o&&o.split(/,/).forEach(g=>{let[m,he]=g.split(/:/),qe=p.fromHexCode(m,{onError:"return"});qe?c.push(new y({hexCode:qe.hexCode(),userSuppliedName:he})):c.push(new y({algorithm:m,userSuppliedName:he}))}),new E(u,c,r)}else return new E}pushState(e,{setURL:t}){let r={url:e};history.pushState(r,"",t?e:null)}};var R=class{static{a(this,"UnsaveablePaletteState")}start(){}savePalette(e){this.palette=e}loadPalette(){return this.palette||new E}};var D=class extends d{static{a(this,"PaletteComponent")}static tagName="g-palette";static observedAttributes=["show-warnings","save-state"];saveStateChangedCallback({newValue:e}){e||e===""?this._saveableState=new oe:this._saveableState=new R}get saveableState(){return this._saveableState}constructor(){super(),this._saveableState=new R,this.colorChangeEventListener=e=>{this.dispatchEvent(new CustomEvent("palette-change",{cancelable:!1,bubbles:!0}))},this.previewScaleEventListener=e=>{let t=document.getElementById("preview-dialog"),r=t.querySelector("g-preview");r&&r instanceof q?r.colorScale=e.detail.colorScale:console.warn("Expected the dialog to have a g-preview inside, but found %o",r),t.querySelectorAll("button[data-close]").forEach(o=>{o.addEventListener("click",i=>{i.preventDefault(),t.close()})}),t.showModal()}}render(){this.querySelectorAll(C.tagName).forEach(e=>{this._addScaleEventListeners(e)})}get primaryColor(){let e=this.primaryColorScale;return e?{hexCode:e.baseColorSwatch.hexCode,colorName:e.colorName,colorNameUserOverride:e.colorNameUserOverride}:{}}get otherColors(){let e=[];return this.querySelectorAll(C.tagName).forEach(t=>{t.isPrimary||(t.linkedPrimaryAlgorithm?e.push({algorithm:t.linkedPrimaryAlgorithm,colorName:t.colorName,colorNameUserOverride:t.colorNameUserOverride}):e.push({hexCode:t.baseColorSwatch.hexCode,colorName:t.colorName,colorNameUserOverride:t.colorNameUserOverride}))}),e}get primaryColorScale(){return this.querySelector(C.tagName+"[primary]")}addScale({linkAlgorithm:e=null,hexCode:t=null}={}){let r=this.primaryColorScale;if(!r){this.logger.warn("Palette has no primary color scale, so there is no reference to duplicate when adding a new scale");return}if(e&&this.querySelector(C.tagName+`[linked-to-primary='${e}']`))return;let o=r.cloneNode(!0);return o.removeAttribute("primary"),o.baseColorSwatch.removeAttribute("id"),o.baseColorSwatch.removeAttribute("default-link-context"),e&&o.baseColorSwatch.querySelectorAll("input[type=color]").forEach(i=>{i.setAttribute("disabled",!0)}),o.swatches.forEach(i=>i.removeAttribute("derived-from")),this.appendChild(o),e?(o.baseColorSwatch.removeAttribute("hex-code"),o.setAttribute("linked-to-primary",e)):t?o.baseColorSwatch.setAttribute("hex-code",t):o.baseColorSwatch.setAttribute("hex-code",Color.random().hexCode()),o.querySelectorAll(b.tagName).forEach(i=>{i.getAttribute("color-swatch")==r.baseColorSwatch.id&&(i.setAttribute("color-swatch",o.baseColorSwatch.id),i.restoreDefaultColorName())}),this.dispatchEvent(new CustomEvent("palette-change",{cancelable:!1,bubbles:!0})),this._addScaleEventListeners(o),o}_addScaleEventListeners(e){e.addEventListener("base-color-changed",this.colorChangeEventListener),e.addEventListener("unlink-from-primary",this.colorChangeEventListener),e.addEventListener("remove-scale",this.colorChangeEventListener),e.addEventListener("name-change",this.colorChangeEventListener),e.addEventListener("name-cleared",this.colorChangeEventListener),e.addEventListener("preview-scale",this.previewScaleEventListener)}};var se=class extends d{static{a(this,"PreviewColorsContrastComponent")}static tagName="g-preview-colors-contrast";static observedAttributes=["show-warnings","background-color","text-color","form"];formChangedCallback({newValue:e}){this.formName=e}backgroundColorChangedCallback({newValue:e}){this.backgroundColor=e?new p(e):null}textColorChangedCallback({newValue:e}){this.textColor=e?new p(e):null}constructor(){super(),this.formElementChangeListener=e=>{this._updateColors(e.target)}}get form(){return this.formName?document.querySelector(`form[name='${this.formName}']`):null}render(){if(this.form&&(Array.from(this.form.elements).forEach(e=>{e.addEventListener("change",this.formElementChangeListener)}),this.textColor&&this.backgroundColor)){let e=Math.floor(this.textColor.contrast(this.backgroundColor)*100)/100;this.querySelectorAll("[data-ratio]").forEach(t=>{t.textContent=e}),this.querySelectorAll("[data-enhanced]").forEach(t=>{e>=7.1?t.style.display="inline":t.style.display="none"}),this.querySelectorAll("[data-minimum]").forEach(t=>{e>=4.5&&e<7.1?t.style.display="inline":t.style.display="none"}),this.querySelectorAll("[data-insufficient]").forEach(t=>{e<4.5?t.style.display="inline":t.style.display="none"})}}_updateColors(e){e.name=="text-color"?this.setAttribute("text-color",e.value):e.name=="background-color"&&(this.setAttribute("background-color",e.value),this.render())}};var ie=class extends d{static{a(this,"BoxShadowComponent")}static tagName="g-box-shadow";static observedAttributes=["offset-x","offset-y","blur-radius","spread-radius","inset","color","derived-from","raise-by","show-warnings"];attributeChangedCallback(e,t,r){let o=super.attributeChangedCallback(e,t,r);return this.dispatchEvent(new CustomEvent("attributeChanged")),o}derivedFromChangedCallback({newValue:e}){this.derivedBoxShadowId=e}raiseByChangedCallback({newValue:e}){this.raiseBy=this._requireRawNumber(e,1)}offsetXChangedCallback({newValue:e}){this.offsetX=this._requireRawNumber(e)}offsetYChangedCallback({newValue:e}){this.offsetY=this._requireRawNumber(e)}blurRadiusChangedCallback({newValue:e}){this.blurRadius=this._requireRawNumber(e)}spreadRadiusChangedCallback({newValue:e}){this.spreadRadius=this._requireRawNumber(e)}colorChangedCallback({newValue:e}){this.color=e}insetChangedCallback({newValue:e}){this.inset=e||e==""}constructor(){super(),this.spreadRadius=0,this.blurRadius=0,this.offsetY=0,this.offsetX=0,this.color="black",this.attributeChangedListener=e=>{this.render()}}get adjustment(){if(this.raiseBy)return this.insetValue=="inset"?this.raiseBy*.5:this.raiseBy}get offsetXPx(){return this._derivedBoxShadowValue("offsetX")+"px"}get offsetYPx(){return this._derivedBoxShadowValue("offsetY")+"px"}get blurRadiusPx(){return this._derivedBoxShadowValue("blurRadius",e=>e*this.adjustment)+"px"}get spreadRadiusPx(){return this._derivedBoxShadowValue("spreadRadius",e=>e*(this.adjustment/(Math.log(this.adjustment)+1)))+"px"}get shadowColor(){let e=this._derivedBoxShadowValue("color"),t=parseInt(e);return isNaN(t)?e:t>=0&&t<256?`rgb(${t},${t},${t})`:(this.logger.warn(`Color value '${e}' isn't a hexcode nor a shade of gray between 0 and 255`),0)}get insetValue(){return this._derivedBoxShadowValue("inset",null,!1)?"inset":""}get derivedElement(){return document.getElementById(this.derivedBoxShadowId)}_derivedBoxShadowValue(e,t=null,r=!0){let o=this.derivedElement;if(o){if(o[e]||o[e]==0)return t?t(o[e]):o[e];r&&this.logger.warn(`Found derived-by with id '${this.derivedBoxShadowId}', but it had no value for '${e}', so using fallback`)}else this.derivedBoxShadowId&&this.logger.warn(`Did not find element with id '${this.derivedBoxShadowId}'`);return this[e]}render(){if(this.children.length==0){this.logger.warn("No children, so nothing to apply a shadow to");return}this.derivedElement&&this.derivedElement.addEventListener("attributeChanged",this.attributeChangedListener),Array.from(this.children).forEach(e=>{e.style.boxShadow=[this.offsetXPx,this.offsetYPx,this.blurRadiusPx,this.spreadRadiusPx,this.shadowColor,this.insetValue].join(" ")})}_requireRawNumber(e,t=0){let r=parseFloat(e);return isNaN(r)?(this.logger.warn(`Value '${e}' is not a number and will be ignored`),t):r}};var ne=class extends d{static{a(this,"BoxShadowFormComponent")}static tagName="g-box-shadow-form";static observedAttributes=["show-warnings"];constructor(){super(),this.inputListener=e=>{this.dispatchEvent(new CustomEvent("change",{detail:e}))},this.changeListeners=new Set}render(){this.eachElement(e=>{e.addEventListener("input",this.inputListener)})}eachElement(e){let t=this.querySelector("form");if(!t){this.logger.warn("Could not find a form element");return}Array.from(t.elements).forEach(r=>e(r)),this.querySelectorAll("g-xy-input").forEach(r=>e(r))}linkElements(e){this.addEventListener("change",e),this.changeListeners.has(e)||(this.changeListeners.add(e),this.eachElement(t=>{e(new CustomEvent("change",{detail:{target:t}}))}))}};var ae=class extends d{static{a(this,"BoxShadowScaleComponent")}static tagName="g-box-shadow-scale";static observedAttributes=["offset-x","offset-y","blur-radius","spread-radius","inset","color","gradient","border-radius","border-color","background-color","form","show-warnings"];formChangedCallback({newValue:e}){this.formId=e}gradientChangedCallback({newValue:e}){this.gradient=(100+this._requireRawNumber(e))/100}borderRadiusChangedCallback({newValue:e}){this.borderRadius=100*Math.pow(this._requireRawNumber(e)/100,3)}borderColorChangedCallback({newValue:e}){let t=this._requireRawNumber(e,256);t==0?this.borderColor="transparent":(t=256*Math.pow(this._requireRawNumber(t)/256,3),t=256-t,this.borderColor=`rgb(${t},${t},${t})`)}backgroundColorChangedCallback({newValue:e}){let t=this._requireRawNumber(e,256);t==0?this.backgroundColor="transparent":(t=256*Math.pow(this._requireRawNumber(t)/256,3),t=256-t,this.backgroundColor=`rgb(${t},${t},${t})`)}offsetXChangedCallback({newValue:e}){this.offsetX=this._requireRawNumber(e)}offsetYChangedCallback({newValue:e}){this.offsetY=this._requireRawNumber(e)}blurRadiusChangedCallback({newValue:e}){this.blurRadius=this._requireRawNumber(e)}spreadRadiusChangedCallback({newValue:e}){this.spreadRadius=this._requireRawNumber(e)}colorChangedCallback({newValue:e}){this.color=e}insetChangedCallback({newValue:e}){this.inset=e||e==""}constructor(){super(),this.spreadRadius=0,this.blurRadius=0,this.offsetY=0,this.offsetX=0,this.color="black",this.borderRadius=0,this.changeListener=e=>{e.detail&&e.detail.target&&(e.detail.target.type=="checkbox"?e.detail.target.checked?this.setAttribute(e.detail.target.name,!0):this.removeAttribute(e.detail.target.name):this.setAttribute(e.detail.target.name,e.detail.target.value))}}render(){let e=document.getElementById(this.formId);e&&e.linkElements(this.changeListener);let t=this.querySelectorAll("g-box-shadow");if(t.length==0){this.logger.warn("No g-box-shadow elements inside - can't do anything");return}let r=t[0];r.setAttribute("color",this.color),r.setAttribute("blur-radius",this.blurRadius),r.setAttribute("spread-radius",this.spreadRadius),r.setAttribute("offset-x",this.offsetX),r.setAttribute("offset-y",this.offsetY),this.inset?r.setAttribute("inset",!0):r.removeAttribute("inset");let o=[];t.forEach((i,n)=>{if(i.children[0]&&(i.children[0].style.borderRadius=`${this.borderRadius}%`,i.children[0].style.borderColor=this.borderColor,i.children[0].style.borderStyle="solid",i.children[0].style.borderWidth="1px",i.children[0].style.backgroundColor=this.backgroundColor),this.gradient){let l=1+Math.pow(this.gradient,n);n>0&&i.setAttribute("raise-by",l)}else i.removeAttribute("raise-by");i.children[0]&&o.push(`.${this.inset?"inset-":""}shadow-${n+1} {
  box-shadow: ${i.children[0].style.boxShadow}
}
`)}),this.querySelector("code")&&(this.querySelector("code").textContent=o.join(`
`))}_requireRawNumber(e,t=0){let r=parseInt(e);return isNaN(r)?(this.logger.warn(`Value '${e}' is not a number and will be ignored`),t):r}};var le=class extends d{static{a(this,"XYInputComponent")}static tagName="g-xy-input";static observedAttributes=["x","y","x-min","x-max","y-min","y-max","show-warnings"];_positionCursor(e,t){if(this.xValue&&this.yValue){let r=this._intOrDefault(this.cursor.offsetWidth),o=this._intOrDefault(this.cursor.offsetHeight);this.cursor.style.top=t-r/2+"px",this.cursor.style.left=e-o/2+"px"}}constructor(){super(),this.mouseDown=!1,this.mouseDownListener=e=>{e.button==0&&(this.cursorStyle=this.style.cursor||"auto",this.style.cursor="crosshair",this.mouseDown=!0,this.cursor&&this._positionCursor(e.offsetX,e.offsetY))},this.mouseUpListener=e=>{this.style.cursor=this.cursorStyle,e.button==0&&(this.mouseDown=!1)},this.mouseLeaveListener=e=>{this.style.cursor=this.cursorStyle,this.mouseDown=!1},this.mouseMoveListener=e=>{if(this.mouseDown){this.cursor&&this._positionCursor(e.offsetX,e.offsetY);let t=e.target.offsetWidth,r=e.target.offsetHeight,o=e.offsetX/t,i=e.offsetY/r,n=o*this.numXValues,l=i*this.numYValues;this.xValue=Math.floor(n+this.xMin),this.yValue=Math.floor(l+this.yMin),this.querySelectorAll("[data-x-value").forEach(c=>c.textContent=this.xValue),this.querySelectorAll("[data-y-value").forEach(c=>c.textContent=this.yValue),this.offsetXInputs.forEach(c=>{c.value=this.xValue,c.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0}))}),this.offsetYInputs.forEach(c=>{c.value=this.yValue,c.dispatchEvent(new InputEvent("input",{bubbles:!0,cancelable:!0}))})}},this.xChangedListener=e=>{this.xValue=e.target.value,this.render()},this.yChangedListener=e=>{this.yValue=e.target.value,this.render()}}xChangedCallback({newValue:e}){this.xValue=e}yChangedCallback({newValue:e}){this.yValue=e}xMinChangedCallback({newValue:e}){this.xMin=this._intOrDefault(e)}xMaxChangedCallback({newValue:e}){this.xMax=this._intOrDefault(e)}yMinChangedCallback({newValue:e}){this.yMin=this._intOrDefault(e)}yMaxChangedCallback({newValue:e}){this.yMax=this._intOrDefault(e)}render(){let e=document.querySelector("[data-xy]");if(!e){this.logger.warn("Could not find anything with [data-xy]");return}if(this.cursor=document.querySelector("[data-cursor]"),!this.cursor){this.logger.warn("Could not find [data-cursor]");return}if(this.querySelectorAll("[data-x-min]").forEach(t=>t.textContent=this.xMin),this.querySelectorAll("[data-x-max]").forEach(t=>t.textContent=this.xMax),this.querySelectorAll("[data-y-min]").forEach(t=>t.textContent=this.yMin),this.querySelectorAll("[data-y-max]").forEach(t=>t.textContent=this.yMax),this._requireIntValue("xMin")&&this._requireIntValue("xMax")&&this._requireIntValue("yMin")&&this._requireIntValue("yMax")){let t=this.xValue||0,r=this.yValue||0,o=e.offsetWidth*((t-this.xMin)/this.numXValues),i=e.offsetHeight*((r-this.yMin)/this.numYValues);this._positionCursor(o,i),this.querySelectorAll("[data-x-value").forEach(n=>n.textContent=this.xValue),this.querySelectorAll("[data-y-value").forEach(n=>n.textContent=this.yValue),e.addEventListener("mousedown",this.mouseDownListener),e.addEventListener("mouseup",this.mouseUpListener),e.addEventListener("mousemove",this.mouseMoveListener),e.addEventListener("mouseleave",this.mouseLeaveListener),this.offsetXInputs.forEach(n=>{n.addEventListener("input",this.xChangedListener),n.setAttribute("min",this.xMin),n.setAttribute("max",this.xMax)}),this.offsetYInputs.forEach(n=>{n.addEventListener("input",this.yChangedListener),n.setAttribute("min",this.yMin),n.setAttribute("max",this.yMax)})}else e.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("mouseup",this.mouseUpListener),e.removeEventListener("mousemove",this.mouseMoveListener),e.removeEventListener("mousemove",this.mouseLeaveListener)}get numXValues(){return this.xMax-this.xMin}get numYValues(){return this.yMax-this.yMin}get offsetXInputs(){return this.querySelectorAll("input[name='offset-x']")}get offsetYInputs(){return this.querySelectorAll("input[name='offset-y']")}_requireIntValue(e){return this[e]||this[e]==0?!0:(this.isConnected&&this.logger.warn(`${e} has no value, so the control can't work`),!1)}_intOrDefault(e,t=0){if(!e&&e!==0)return t;let r=parseInt(e);return isNaN(r)?(this.logger.warn(`Value '${e}' was not a number. Using '${t}' instead`),t):r}};var ot=a((s,e)=>{let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>{s(...r)},e)}},"debounce");var ce=class{static{a(this,"PaletteUI")}constructor(e){if(this.saveableState=e,!this.saveableState)throw"PushState is required";this.palette=this.saveableState.loadPalette(),this.throttledSavePalette=ot(this.saveableState.savePalette.bind(this.saveableState),500)}build(){let e=document.querySelector("g-palette");if(!e)return;new URL(window.location).searchParams.get("compact")=="true"&&document.querySelectorAll(`${k.tagName}[attribute-name='compact']`).forEach(r=>{r.check()}),document.querySelectorAll(`${k.tagName}[attribute-name='compact']`).forEach(r=>{this.palette.compact?r.check():r.uncheck()}),document.querySelectorAll(`${C.tagName}[primary]`).forEach(r=>{this.palette.withPrimaryColor(o=>r.baseColorSwatch.setAttribute("hex-code",o)),this.palette.whenPrimaryNameUserOverride(o=>r.overrideColorName(o)),this.palette.whenPrimaryNameDefault(()=>r.restoreDefaultColorName())}),this.palette.otherColors.forEach(r=>{let o=null;r.whenHexCode(i=>{o=e.addScale({hexCode:i})}),r.whenAlgorithm(i=>{o=e.addScale({linkAlgorithm:r.algorithm})}),o&&(r.whenNameUserOverride(i=>o.overrideColorName(i)),r.whenNameDefault(()=>o.restoreDefaultColorName(name)))}),e.addEventListener("palette-change",()=>{this.extractPalette(),this.throttledSavePalette(this.palette)}),document.querySelectorAll(`${k.tagName}[attribute-name='compact']`).forEach(r=>{r.addEventListener("change",()=>{this.palette.compact=r.checked,this.throttledSavePalette(this.palette)})})}extractPalette(){let e=document.querySelector("g-palette");if(e&&e.primaryColor){this.palette.primaryColor=new y({hexCode:e.primaryColor.hexCode,userSuppliedName:e.primaryColor.colorNameUserOverride?e.primaryColor.colorName:null});let t=e.otherColors.map(r=>{let o=r.colorNameUserOverride?r.colorName:null;return r.hexCode?new y({hexCode:r.hexCode,userSuppliedName:o}):new y({algorithm:r.algorithm,userSuppliedName:o})});this.palette.otherColors=t,this.palette.compact=!!e.getAttribute("compact")}}};document.addEventListener("DOMContentLoaded",()=>{G.define(),k.define(),ie.define(),ne.define(),ae.define(),b.define(),v.define(),W.define(),te.define(),re.define(),C.define(),D.define(),q.define(),se.define(),L.define(),_.define(),A.define(),le.define();let s=document.querySelector(D.tagName);if(s){let e=s.saveableState;e.start(),new ce(e).build(),window.addEventListener("popstate",r=>{r.state&&r.state.url&&(window.location=r.state.url)})}});})();
//# sourceMappingURL=main.js.map
